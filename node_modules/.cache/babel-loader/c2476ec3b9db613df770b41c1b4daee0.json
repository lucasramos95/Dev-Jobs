{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Dev Projetos/ReactJS/dev-jobs/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _toConsumableArray from\"C:/Dev Projetos/ReactJS/dev-jobs/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Dev Projetos/ReactJS/dev-jobs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import ItemResult from'./ItemResult';import Search from'./Search';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Results=function Results(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),jobs=_useState2[0],setJobs=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filters=_useState6[0],setFilters=_useState6[1];useEffect(function(){fetch('data.json',{headers:{\"Content-type\":\"application/json\",\"Accept\":\"application/json\"}}).then(function(response){return response.json();}).then(function(data){setJobs(data);setData(data);}).catch(function(err){return console.log(err);});},[]);var addedFilters=function addedFilters(filterValue){var filtersArray=_toConsumableArray(filters);if(filtersArray.indexOf(filterValue)===-1){filtersArray.push(filterValue);}setFilters(filtersArray);var jobsArray=_toConsumableArray(jobs);var newResults=jobsArray.filter(function(job){if(job.level===filterValue){return job.level===filterValue;}if(job.role===filterValue){return job.role===filterValue;}if(job.languages.includes(filterValue)){return job.languages.includes(filterValue);}if(job.tools.includes(filterValue)){return job.tools.includes(filterValue);}});setJobs(newResults);};var removeOneFilter=function removeOneFilter(filterValue){var filtersArray=_toConsumableArray(filters);var newArray=filtersArray.filter(function(item){return item!==filterValue;});setFilters(newArray);var originalArray=_toConsumableArray(data);setJobs(originalArray);sortResults(newArray,originalArray);};var sortResults=function sortResults(filtersArray,jobsArray){var newJobs=[];for(var i=0;i<jobsArray.length;i++){var job=jobsArray[i];var isFiltered=filterJob(job,filtersArray);if(isFiltered){newJobs.push(job);}}setJobs(newJobs);};var filterJob=function filterJob(job,filters){var filterHits=0;for(var i=0;i<filters.length;i++){var filter=filters[i];filterHits+=searchJobs(job,filter);}if(filterHits===filters.length){return true;}else{return false;}};var searchJobs=function searchJobs(job,filter){var hits=0;for(var key in job){var value=job[key];if(Array.isArray(value)){var _iterator=_createForOfIteratorHelper(value),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item===filter){hits+=1;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else{if(value===filter){hits+=1;}}}return hits;};var clearAllFilters=function clearAllFilters(){setJobs(data);setFilters([]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"results\",children:[filters.length>0&&/*#__PURE__*/_jsx(Search,{filters:filters,removeOneFilter:removeOneFilter,clearAllFilters:clearAllFilters}),jobs&&/*#__PURE__*/_jsx(ItemResult,{data:jobs,addedFilters:addedFilters})]});};export default Results;","map":{"version":3,"names":["useState","useEffect","ItemResult","Search","Results","jobs","setJobs","data","setData","filters","setFilters","fetch","headers","then","response","json","catch","err","console","log","addedFilters","filterValue","filtersArray","indexOf","push","jobsArray","newResults","filter","job","level","role","languages","includes","tools","removeOneFilter","newArray","item","originalArray","sortResults","newJobs","i","length","isFiltered","filterJob","filterHits","searchJobs","hits","key","value","Array","isArray","clearAllFilters"],"sources":["C:/Dev Projetos/ReactJS/dev-jobs/src/Results.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport ItemResult from './ItemResult';\r\nimport Search from './Search';\r\n\r\nconst Results = () => {\r\n    const [jobs, setJobs] = useState(null);\r\n    const [data, setData] = useState(null);\r\n    const [filters, setFilters] = useState([]);\r\n    \r\n\r\n    useEffect(() => {\r\n        fetch('data.json', {\r\n            headers: {\r\n                \"Content-type\": \"application/json\",\r\n                \"Accept\": \"application/json\"\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            setJobs(data)\r\n            setData(data)\r\n        })\r\n        .catch(err => console.log(err));\r\n    }, [])\r\n\r\n    const addedFilters = (filterValue) => { \r\n        const filtersArray = [...filters];\r\n        if (filtersArray.indexOf(filterValue) === -1) {\r\n            filtersArray.push(filterValue);\r\n        }\r\n        setFilters(filtersArray);\r\n\r\n        const jobsArray = [...jobs];\r\n        const newResults = jobsArray.filter(job => {\r\n            if (job.level === filterValue) {\r\n                return job.level === filterValue\r\n            }\r\n            if (job.role === filterValue) {\r\n                return job.role === filterValue\r\n            }\r\n            if (job.languages.includes(filterValue)) {\r\n                return job.languages.includes(filterValue)\r\n            }\r\n            if (job.tools.includes(filterValue)) {\r\n                return job.tools.includes(filterValue)\r\n            }\r\n        })\r\n       setJobs(newResults)\r\n    }\r\n\r\n    const removeOneFilter = (filterValue) => {\r\n        const filtersArray = [...filters];\r\n        const newArray = filtersArray.filter(item => item !== filterValue)\r\n        setFilters(newArray);\r\n\r\n        const originalArray = [...data];\r\n        setJobs(originalArray);\r\n        sortResults(newArray, originalArray);\r\n    }\r\n\r\n    const sortResults = (filtersArray, jobsArray) => {\r\n        const newJobs = [];\r\n        for (let i = 0; i < jobsArray.length; i++) {\r\n            const job = jobsArray[i];\r\n            var isFiltered = filterJob(job, filtersArray)\r\n            if (isFiltered) {\r\n                newJobs.push(job)\r\n            }\r\n        }\r\n        setJobs(newJobs);\r\n    }\r\n\r\n    const filterJob = (job, filters) => {\r\n        let filterHits = 0;\r\n        for (let i = 0; i < filters.length; i++) {\r\n            const filter = filters[i];\r\n            filterHits += searchJobs(job, filter);\r\n        }\r\n        if (filterHits === filters.length) {\r\n            return true\r\n        }\r\n        else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    const searchJobs = (job, filter) => {\r\n        var hits = 0;\r\n        for (const key in job) {\r\n            let value = job[key];\r\n            if (Array.isArray(value)) {\r\n                for (const item of value) {\r\n                    if (item === filter) {\r\n                        hits += 1\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (value === filter) {\r\n                    hits += 1\r\n                }\r\n            }\r\n        }\r\n        return hits;\r\n    }\r\n\r\n    const clearAllFilters = () => {\r\n        setJobs(data);\r\n        setFilters([]);\r\n    }\r\n\r\n    return ( \r\n        <div className=\"results\">\r\n            { (filters.length > 0) \r\n                && <Search \r\n                filters={ filters } \r\n                removeOneFilter={ removeOneFilter }\r\n                clearAllFilters={ clearAllFilters }/> }\r\n            { jobs && \r\n                <ItemResult \r\n                data={ jobs } \r\n                addedFilters={ addedFilters }/> }\r\n        </div>\r\n     );\r\n}\r\n \r\nexport default Results;"],"mappings":"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"},"metadata":{},"sourceType":"module"}